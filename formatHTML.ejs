<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    .tableSetting {
      border: black 2px solid;
      border-spacing: 0;
    }

    .bodySetting {
      border: red 1px solid;
      /* border-spacing: 0; */
    }
  </style>

</head>

<script>
// <body>
  // <% 
      isDeleted = (objBefore, currentList) => {
        console.log("XXXXXXXXXXXXXXXXxxINside isDeleted");
        console.log("objBefore", objBefore);
        console.log("list", currentList);
        for (let v in currentList) {
          if (currentList[v].name === name) {
            for (let objBefore in currentList) {
              if (objBefore.pid === currentList[objBefore][pid])
                return false;
            }
          }
        }
        return true;
      }  
  // %>
</script>
<body>
  <%
  isDeleted = (objBefore, objName, currentList) => {
    console.log("XXXXXXXXXXXXXXXXxxINside isDeleted");
    <!-- console.log("objBefore", objBefore);
    console.log("Name", objName); -->
    for (let v in currentList) {
      if (currentList[v].name === objName) {
        for (let objBefore in currentList) {
          if (objBefore.pid === currentList[objBefore][pid])
            return false;
        }
      }
    }
    return true;
  }    
  %>
    <% if (!beforeData) {
      console.log("first time");
    } else { %>
      <% for(const itemArray in beforeData) { %>
        <table class="tableSetting">
          <thead>
            <tr>
              <th colspan="3" class="bodySetting" ><h2><%= itemArray.name %></h2></th>
              <th colspan="3" class="bodySetting" ><h2>Before</h2></th>
              <th colspan="3" class="bodySetting" ><h2>Now</h2> </th>
            </tr>
          </thead>
          
          <tbody>
            <tr>
              <% for (let obj of beforeData[itemArray]) {
                console.log(isDeleted(obj, beforeData[itemArray].name, list));
              } %>

            </tr>
          </tbody>

        </table>
        <br>
      <% } %>
    <% } %>

</body>

</html>